<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../styles/popup.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
      rel="stylesheet"
    />
  </head>
  <body>
    <div id="translatePopup" class="container extension-popup">
      <div>
        <div class="popup-header">
          <div class="header-title">
            <svg
              id="translateIcon"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon"
            >
              <circle cx="12" cy="12" r="10"></circle>
              <path
                d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
              ></path>
              <path d="M2 12h20"></path>
            </svg>
            <svg
              id="messageIcon"
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="icon hidden"
            >
              <path
                d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"
              ></path>
            </svg>
            <h3 id="popupTitle" class="popup-title">Web Translator</h3>
          </div>
          <div class="header-actions">
            <button
              id="togglePageTranslation"
              class="header-btn"
              title="Enable page translation"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon"
              >
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                <line x1="3" y1="9" x2="21" y2="9"></line>
                <line x1="9" y1="21" x2="9" y2="9"></line>
              </svg>
            </button>
            <button id="closeBtn" class="header-btn">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon"
              >
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>
        <button id="translatePageBtn" class="translate-page-btn">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="14"
            height="14"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="icon"
          >
            <circle cx="12" cy="12" r="10"></circle>
            <path
              d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"
            ></path>
            <path d="M2 12h20"></path>
          </svg>
          <span>Translate This Page</span>
        </button>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <button data-tab="translationSection" class="tab-btn active">Translate</button>
        <button data-tab="aiQuestionSection" class="tab-btn">Ask AI</button>
      </div>

      <!-- Content -->
      <div id="popupContent" class="popup-content">
        <div id="modelSelector" class="model-selector-container">
          <label class="model-label">AI Model</label>
          <div class="select-container">
            <select id="ai-model" class="model-select">
              <option value="gemini-1.5-flash">Gemini 1.5 Flash</option>
              <option value="gemini-pro">Gemini Pro</option>
              <option value="gemini-1.0-pro">Gemini 1.0 Pro</option>
              <option value="gemini-pro-vision">Gemini Pro Vision</option>
            </select>
            <div class="select-arrow">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon"
              >
                <polyline points="6 9 12 15 18 9"></polyline>
              </svg>
            </div>
          </div>
        </div>

        <!-- Translation Section -->
        <div id="translationSection" class="section">
          <div class="language-selector">
            <select id="sourceLang" class="lang-select">
              <option value="auto" selected>Auto-detect</option>
              <option value="en">English</option>
              <option value="fa">Persian</option>
              <option value="ar">Arabic</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="es">Spanish</option>
              <option value="zh">Chinese</option>
              <option value="ru">Russian</option>
            </select>
            <button id="switchLangs" class="switch-btn">
              <div class="switch-arrows">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="icon"
                >
                  <line x1="12" y1="19" x2="12" y2="5"></line>
                  <polyline points="5 12 12 5 19 12"></polyline>
                </svg>
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="14"
                  height="14"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="icon"
                >
                  <line x1="12" y1="5" x2="12" y2="19"></line>
                  <polyline points="19 12 12 19 5 12"></polyline>
                </svg>
              </div>
            </button>
            <select id="targetLang" class="lang-select">
              <option value="en" selected>English</option>
              <option value="fa">Persian</option>
              <option value="ar">Arabic</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="es">Spanish</option>
              <option value="zh">Chinese</option>
              <option value="ru">Russian</option>
            </select>
          </div>

          <div id="pageTranslationMode" class="page-translation-mode hidden">
            <p class="page-translation-text">
              Page translation is active. The entire webpage will be translated
              from <span id="sourceLanguageName">Auto-detect</span> to
              <span id="targetLanguageName">English</span>.
            </p>
            <button id="translate-page-button" class="translate-page-action">
              Translate This Page
            </button>
          </div>

          <div id="textTranslationMode" class="text-translation-mode">
            <div class="textarea-container">
              <textarea
                id="sourceText"
                class="source-textarea"
                placeholder="Enter text to translate"
              ></textarea>
              <div class="textarea-actions">
                <button id="clear-text" class="voice-btn">
                  <span class="material-icons clear-text">clear</span>
                </button>
              </div>
            </div>
            <div class="textarea-container">
              <textarea
                id="translatedText"
                class="translated-textarea"
                placeholder="Translation will appear here"
                readonly
              ></textarea>
              <div class="textarea-actions">
                <button id="copy-text" class="voice-btn">
                  <span class="material-icons copy-text">content_copy</span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- AI Question Section -->
        <div id="aiQuestionSection" class="section hidden">
          <div class="conversation-header">
            <h4>Ask AI about this page</h4>
            <button id="clearConversation" class="clear-conversation-btn" title="Clear conversation">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                <line x1="10" y1="11" x2="10" y2="17"></line>
                <line x1="14" y1="11" x2="14" y2="17"></line>
              </svg>
            </button>
          </div>
          <div class="conversation-container">
            <div id="conversationBox" class="conversation-box">
              <div class="empty-conversation">
                Ask a question to start a conversation
              </div>
            </div>
          </div>
          <form id="questionForm" class="question-form">
            <input
              type="text"
              id="questionInput"
              class="question-input"
              placeholder="Ask something..."
            />
            <button type="submit" id="sendBtn" class="send-btn" disabled>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon"
              >
                <line x1="22" y1="2" x2="11" y2="13"></line>
                <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
              </svg>
            </button>
          </form>
        </div>
      </div>

      <!-- API Key Section -->
      <div id="apiKeySection" class="api-key-section">
        <div class="api-key-container">
          <label for="apiKeyInput" class="api-key-label">Gemini API Key</label>
          <div class="api-key-input-container">
            <input
              type="password"
              id="apiKeyInput"
              class="api-key-input"
              placeholder="Enter your Gemini API key"
            />
            <button id="toggleApiKeyVisibility" class="toggle-visibility-btn">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon"
              >
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
          <div class="api-key-actions">
            <button id="saveApiKey" class="save-api-key-btn">
              Save API Key
            </button>
            <a
              href="https://ai.google.dev/"
              target="_blank"
              class="get-api-key-link"
              >Get API Key</a
            >
          </div>
          <div id="api-key-status" class="api-key-status"></div>
        </div>
      </div>
    </div>

    <script src="../scripts/popup.js"></script>
  </body>
</html>
